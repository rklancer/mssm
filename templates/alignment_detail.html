<html>
<head>
    <title>Alignment {{ alignment.id }}: {{ alignment.name }}</title>
</head>
<body>
    <a href="{% url mssm.views.alignment_list %}">Return to MSSM alignment list</a>
    <h1>Detail of alignment {{ alignment.id }}: {{ alignment.name }}</h1>
   
    <ul>
        <li><a href="?edit">Edit information</a></li>
        <li><a href="?delete">Delete alignment</a>
        {% if show_delete_form %}
            <table>
                <tr>
                    <td>
                        Delete alignment?
                    </td>
                    <td>
                        <form action="" method="POST">
                            <input type=hidden name="method_tunnel" value="DELETE">
                            <input type="submit" value="Delete">
                        </form>
                    </td>
                    <td>
                        <form action="" method="GET">
                            <input type="submit" value="Cancel">
                        </form>
                    </td>
                </tr>
            </table>
        {% endif %}
        </li>
    </ul>
       
    {% if edit_form %}
    <form action="" method="POST">
        <input type=hidden name="method_tunnel" value="PUT">
        <table>
            {{ edit_form.as_table }}
            <tr>
                <th><input type="submit" value="submit" /></th>
            </tr>
        </table>
    </form>

    {% else %}
    <p>{{ alignment.description }}</p>
    <ul> 
        {% if alignment.context_url %}
        <li>More context: <a href="{{alignment.context_url}}">{{alignment.context_url}}</a></li>
        {% endif %}
        {% if alignment.source_url %}
        <li>Downloaded from: <a href="{{alignment.source_url}}">{{alignment.source_url}}</a></li>
        {% endif %}
        <li>Download ({{alignment.format}} format): <a href="{{alignment.local_file.url}}">{{alignment.local_file.url}}</a></li>
    </ul>
    {% endif %}


    <table>
    {% spaceless %}
        <tr>
            <th>description</th>
            <th><a href="{% url mssm.views.alignment_detail alignment.id %}">row</a></th>
            <th></th>
            {% for col in header_row %}
            <th><a href="?sort-by={{col}}">{{col}}</a></th>
            {% endfor %}
        </tr>
            
        {% for row in alignment_rows %}
        <tr>
            <td>{{row.name}}</td>
            <td>{{row.row_num}}</td>
            <td><a href="?show-ungapped={{row.row_num}}">ungap</a></td>
            {% for residue in row.filtered_sequence %}
            <td>{{residue}}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    {% endspaceless %}
    </table>
</body>
</html>
