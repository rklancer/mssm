tag-hovered
    close any open tag-hover tooltip
    open tag-hover tooltip over tag

items-hovered
    remove hover style from all items
    add hover style to items listed

columns-selected
    remove selected-style from all items
    add selected-style to items listed
    update column status display
    update "segment" display in scores-histogram
    update which tags are styled as fully/partially/not selected
     
    
rows-selected
    remove selected-style from all items
    add selected-style to items listed
    update row status display
    update which tags are styled as fully/partially/not selected
    

cells-selected
    remove selected-style from all items
    add selected-style to items listed
    update cell status display
    update which segments of detail histogram are styled as fully/partially/not selected
    update which tags are styled as fully/partially/not selected

recent-clade
    update comparison clade in columns-related-to tab (load appropriate data into histograms)

recent-group
    update comparison group in columns-related-to tab

item-open
    close any tooltip menus
    open tooltip menu on new open item (ajax load contents)
    update highlighted item in just-columns and columns-related-to tab
    update comparison column in columns-related-to tab (what this means: *if* comparison-type-option is "column", load column-column comparison data into score histogram and column-by-score view in the columns-related-to tab)
    if item-open is a pair, scroll the leftmost column into view and temporarily hide the 
    if item-open WAS a pair
    (ISSUE: see, we do need different events to indicate *which way* various properties changed.)
    
annotation-highlight-option
    change the stylesheet?
    
(ISSUE: what happens when an annotation is added? We don't want to track annotations in javascript -- these should be updated in the database *and* the local html should be updated, probably. But we want to fire an event despite not changing the state stored in javascript? Or do we want to track annotations in javascript?

Also consider that annotations are *not* hijaxed - they correspond to state that is stored on the server and is not undone by hitting the back button.)

sequence-highlight-option
    change the stylesheet?
    
columns-hidden:
    (ISSUE: here's where you really need to diff old & new properties)
    set display:none style on newly hidden columns
    
tagging-menu-open:
    close or open tagging menu
    
column-tags-list-scroll:
    set the tags list to the relevant new values
    
row-tags-list-scroll:
    set the tags list to the relevant new values

cell-tags-list-scroll:
    set the tags list to the relevant new values

current-grouping:
    remove any group handles, links, and gaps
    add the relevant group handles, links, and gaps
    show the appropriate option links (edit grouping, remove grouping)
    
reference-row:
    copy row to new table in a new div
    (or delete div)
    
sort-columns:
    if sort-columns is now empty: hide sort-column panel, show tree-column panel
    ISSUE: how to distinguish a change in *which* columns we sort on from a change *from* tree to sort-panel
    remove current grouping (ISSUE: how? Or should the state machine do this?)
    
tree-threshold:
    update pointer location
    define new grouping on server (possibly fetching already-defined group)
    modify current-grouping (ISSUE: ok to feed back to state machine in this way? how should this feedback system be organized?)
    
alignment-scroll:
    update position of row labels panel, column labels panel, and (?) column-by-score displays

open-tab:
    set open tab in jquery
    get ajax stubs to load relevant data
    
sort-by-score option:
    reset ajax stub to load & display appropriately-sorted data

score-option:
    set all ajax stubs to load new score histogram data and column-by-score data

sort-by-frequency-option:
    if a detail histogram is loaded, sort it and redisplay (note we'll calculate detail histogram in javascript)

scores-bar-hovered:
    if open tab is just-columns or columns-related-to, then find all columns with scores in the corresponding range, and set items-hovered to that list
    (ISSUE: again, this isn't strictly a state machine->UI transfer of information, it's the state machine feeding back on itself.)


column-by-score-scroll:
    ? if sort-by-score-option is True, set alignment-scroll ?

detail-bar-hovered:
    set items-hovered to exactly the corresponding set of cells

weight-by-branches-option:
    do nothing as we aren't using this option yet.

limit-to-visible-option:
    set ajax stubs to load new data. If there is an open pair, and one or both members are hidden columns, set items-open to null

scores-bar-selected:
    if the open tab is pairs-of-columns, then open the zoomed histogram appropriately and set the ajax stub of the pairs-by-score display to show only the relevant subset of scores.
    
zoomed-scores-bar-hovered:
    find subset of pairs whose scores are in the relevant range, and set them hovered...
    
zoomed-scores-bar-selected:
    find subset of pairs whose scores are in the relevant range, set scroll position to show the leftmost such bar, and set scores-bar-selected to the leftmost bar (? ISSUE: write this into the spec?)
    
pairs-by-score-bar-hovered:
    set the items-hovered to selected the corresponding pair of columns
    
pairs-by-score-bar-selected:
    set the item-open to the corresponding pair
    
2d-histogram-area-hovered:
    set the corresponding cells to hovered

comparison-type-option:
    if item-open is a columns, and comparison-type-option is column, load comparison data to open column
    if item-open is a pair, and comparison-type-option is "column", load dropdown with choice between right & left col
    if comparison-type-option is "clade" and recent-clade is not null, load comparison data for recent-clade
    if comparison-type-option is "group" and recent-group is not null, load comparison data for recent-group
    if comparison-type-option is "tag", load dropdown with all row tags. Load comparison data for currently selected tag, if any
    
comparison-tag:
    if comparison-type-option is "tag", load comparison data for this tag

side-by-side-histogram-bar-hovered:
    set items-hovered to relevant cells...
    
    
    










    
    



    





    



    



